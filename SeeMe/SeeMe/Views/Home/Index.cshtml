
@{
    ViewBag.Title = "Home Page";
}

<div class="row">
    <div class="col-lg-12">
        <h1 class="page-header">{{ message }}</h1>
    </div>
</div>
<div class="row">
    <div class="col-lg-12" id="image-wrapper">
        
    </div>
</div>

<script type="text/javascript">
    $(document).ready(function () {
        var imagesUrl;
        var controllerUrl = 'http://localhost:5800/_api/homeapi/';

        $.get(controllerUrl, function (data) {
            imagesUrl = data;
        }).done(function () {
            if (imagesUrl.length !== 0) {
                //$('#image-wrapper div a img').each(function (index) {
                //    $(this).attr('src', controllerUrl + imagesUrl[index]);
                //});
                var imagesHtml = '';

                for (var i = 0; i < imagesUrl.length; i++) {
                    var fileName = imagesUrl[i];
                    imagesHtml = imagesHtml.concat(generateImage(controllerUrl + fileName));
                }

                $('#image-wrapper').html(imagesHtml);
            }
        });

        //$('#image-wrapper div a img').each(function () {
        //    $(this).attr('src', 'http://localhost:5800/_api/homeapi/1.jpg');
        //});

        
    });

    function generateImage(url) {
        var imageStructure = '<div class="col-md-4 col-xs-6 thumb"><a class="thumbnail" href="#"><img class="img-responsive" id="testing" src="{0}" alt=""></a></div>';

        return imageStructure.replace('{0}', url);
    };
</script>